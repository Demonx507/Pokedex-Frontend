const listaPokemon=document.querySelector("#listaPokemon"),botonesHeader=document.querySelectorAll(".btn"),searchInput=document.querySelector("#searchInput"),searchBtn=document.querySelector("#search-btn"),pokemonsPerPage=20;let currentPage=1,URL="https://pokeapi.co/api/v2/pokemon/",todosLosPokemons=[];async function cargarPokemons(){for(let o=1;o<=151;o++)try{const t=await fetch(URL+o),e=await t.json();todosLosPokemons.push(e),mostrarPokemon(e)}catch(t){console.error("Error cargando el Pokémon "+o,t)}mostrarListaPokemons(todosLosPokemons)}function buscarPokemon(){const o=searchInput.value.toLowerCase().trim();if(""==o)return void mostrarListaPokemons(todosLosPokemons);mostrarListaPokemons(todosLosPokemons.filter(t=>t.name.toLowerCase().includes(o)||t.id.toString()===o))}function mostrarListaPokemons(o){listaPokemon.innerHTML="";const t=20*(currentPage-1),e=t+20;o.slice(t,e).forEach(o=>mostrarPokemon(o)),mostrarControles(o.length)}function mostrarControles(o){const t=document.querySelector("#paginacion");t.innerHTML="";const e=Math.ceil(o/20);if(currentPage>1){const o=document.createElement("button");o.textContent="Anterior",o.classList.add("btn-paginacion"),o.addEventListener("click",()=>{currentPage--,mostrarListaPokemons(todosLosPokemons)}),t.appendChild(o)}const n=document.createElement("span");if(n.classList.add("pagina-info"),n.textContent=`Pagina ${currentPage} de ${e}`,t.appendChild(n),currentPage<e){const o=document.createElement("button");o.textContent="Siguiente",o.classList.add("btn-paginacion"),o.addEventListener("click",()=>{currentPage++,mostrarListaPokemons(todosLosPokemons)}),t.appendChild(o)}}function mostrarPokemon(o){let t=o.types.map(o=>`<p class="${o.type.name}">${o.type.name}</p>`).join(""),e=o.id.toString().padStart(3,"0");const n=document.createElement("div");n.classList.add("pokemon"),n.innerHTML=`\n        <p class="pokemon-id-back">#${e}</p>\n        <div class="pokemon-imagen">\n            <img src="${o.sprites.other["official-artwork"].front_default}" alt="${o.name}">    \n        </div>\n        <div class="pokemon-info">\n            <div class="nombre-contenedor">\n                <p class="pokemon-id">#${e}</p>\n                <h2 class="pokemon-nombre">${o.name}</h2>\n                <button class="btn-favorito" data-id="${o.id}">⭐</button>\n            </div>\n            <div class="pokemon-tipos">\n                ${t}\n            </div>\n            <div class="pokemon-stats">\n                <p class="stat">${o.height}m</p>\n                <p class="stat">${o.weight}kg</p>\n            </div>\n        </div>\n    `,listaPokemon.append(n);n.querySelector(".btn-favorito").addEventListener("click",()=>toggleFavorito(o))}function getFavoritos(){return JSON.parse(localStorage.getItem("favoritos"))||[]}function saveFavoritos(o){localStorage.setItem("favoritos",JSON.stringify(o))}function toggleFavorito(o){let t=getFavoritos();t.find(t=>t.id===o.id)?t=t.filter(t=>t.id!==o.id):t.push(o),saveFavoritos(t),mostrarFavoritos()}function mostrarFavoritos(){const o=document.querySelector("#listaFavoritos");o.innerHTML="";getFavoritos().forEach(t=>{let e=t.types.map(o=>`<p class="${o.type.name}">${o.type.name}</p>`).join(""),n=t.id.toString().padStart(3,"0");const s=document.createElement("div");s.classList.add("pokemon"),s.innerHTML=`\n            <p class="pokemon-id-back">#${n}</p>\n            <div class="pokemon-imagen">\n                <img src="${t.sprites.other["official-artwork"].front_default}" alt="${t.name}">    \n            </div>\n            <div class="pokemon-info">\n                <div class="nombre-contenedor">\n                    <p class="pokemon-id">#${n}</p>\n                    <h2 class="pokemon-nombre">${t.name}</h2>\n                </div>\n                <div class="pokemon-tipos">\n                    ${e}\n                </div>\n                <div class="pokemon-stats">\n                    <p class="stat">${t.height}m</p>\n                    <p class="stat">${t.weight}kg</p>\n                </div>\n            </div>\n        `,o.append(s)})}searchBtn.addEventListener("click",buscarPokemon),searchInput.addEventListener("keyup",o=>{"Enter"===o.key&&buscarPokemon()}),botonesHeader.forEach(o=>o.addEventListener("click",o=>{const t=o.currentTarget.id;if("ver-todos"===t)mostrarListaPokemons(todosLosPokemons);else{mostrarListaPokemons(todosLosPokemons.filter(o=>o.types.some(o=>o.type.name===t)))}})),cargarPokemons(),mostrarFavoritos();